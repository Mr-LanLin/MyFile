# Everything Is Object

### 面向对象是什么？为什么要面向对象？所谓英雄不问出处，主帅只关心你能否制敌，可不会关心手下战将用的什么兵器，骑得什么坐骑，用的什么招数，使得什么计策，请的什么援兵。

- **面向对象与面向过程**
    - 面向对象：你办事我放心 （诸葛亮在山头摇摇扇）
    - 面向过程：事必躬亲 （张飞于百万军中取上将首级）

- **面向对象三大特性**
    - 封装
        - 把客观事物封装成抽象的类
        - 隐藏对象属性和实现细节，只对外提供公共访问方法
        - 提高了代码可复用性
    - 继承
        - 让某个类型的对象获得另一个类型的对象的属性和方法
        - 实现继承直接使用基类的属性和方法而无需额外编码的能力
        - 接口继承是指仅使用属性和方法的名称，子类必须提供实现的能力
        - 提高了代码的复用性，减少代码冗余
    - 多态
        - 一个类实例的相同方法在不同情形有不同表现形式
        - 不同内部结构的对象可以共享相同的外部接口
        - `Overloading` 二同一不同
            - 同一类中
            - 相同方法名
            - 形参列表不通（类型，个数，不同类型的顺序）
        - `Overriding` 二同二小一大
            - 方法名和参数列表相同
            - 返回值类型和抛出的异常类型比父类的范围小（或相同）
            - 访问权限比父类大（或相同）

- **继承和组合**
    - 继承和组合是最常见的代码复用技术
    - 继承关系 `is a` （猛将[张飞] 是 战将）
        - 父类的内部细节对子类是可见的 （战将训练、制度，猛将很清楚）
        - 高耦合 （军规规定，战将应该穿红色战甲，猛将也的跟着穿红色的）
        - 编译时绑定 （还没打仗，就得知道怎么打，用什么打，用什么招数）
    - 组合关系 `has a` （主帅[诸葛亮] 有 战将[张飞]）
        - 只能通过所包含的那个对象去调用其方法 （诸葛亮只能派张飞去杀敌，不知怎么杀）
        - 低耦合 （只要你杀敌，穿什么衣服无所谓）
        - 运行时动态的绑定 （打仗了，张飞你去杀敌吧）
    - 综上：优先使用对象组合，而不是继承
        - 组合
            - 不破坏封装，整体类与局部类之间松耦合，彼此相对独立
            - 具有较好的可扩展性
            - 支持动态组合。在运行时，整体对象可以选择不同类型的局部对象
            - 整体类可以对局部类进行包装，封装局部类的接口，提供新的接口
            - 整体类不能自动获得和局部类同样的接口
            - 创建整体类的对象时，需要创建所有局部类的对象
        - 继承
            - 破坏封装，子类与父类之间紧密耦合，子类依赖于父类的实现，子类缺乏独立性
            - 支持扩展，但是往往以增加系统结构的复杂度为代价
            - 不支持动态继承。在运行时，子类无法选择不同的父类
            - 子类不能改变父类的接口
            - 子类能自动继承父类的接口
            - 创建子类的对象时，无须创建父类的对象
 
- **`this`和`super`**
    - this指当前对象
        -  形参与成员变量重名，用this来区分
        -  调用本类中另一种形式的构造函数（必须位于第一条语句）
    - super指当前对象（最近）的父类对象
        - 子类成员变量（或方法）与父类重名，用super来区分
        - 调用父类的某一个构造函数（必须位于第一条语句）
        - 若没显示调用父类构造函数，则会在第一行默认调用super()，父类没有无参构造则会报错
    - 综上：
        - this和super不能同时出现在构造函数
        - this不能调用两个构造函数
        - this()和super()都指的是对象，均不可以在static环境中使用
        - this是一个指向本对象的指针，super是一个java关键字
 
- **`abstract class`和`interface`**
    - 抽象类
        - 可以有默认方法实现、构造器、有mian方法
        - 使用extends来继承，若子类不是抽象的，则需要实现所有抽象方法
        - 抽象方法可以用public、protected和default修饰
        - 可以继承一个类、实现多个接口
        - 添加新方法，可以提供默认实现，不用修改子类
    - 接口
        - 不能存在任何实现，不能有构造器，没有main方法
        - 默认是public修饰（方法是public abstract、成员变量是public static final）
        - 可以继承多个接口
        - 添加新方法，必须修改实现类
    - 综上：
        - 抽象类是一种模板，而接口是一套规则
        - 抽象类是为了代码复用，接口是为了实现多态
        - 抽象类和子类是一般和特殊的关系，而接口和实现是规则和契约的关系

- **面向对象 五大设计原则**
    - 单一职责
        - 一个类只做一类事
        - 只有一个引起该类变化的原因
    - 里氏替换
        - 父类可以出现的地方，子类一定可以出现
        - 可以扩展父类，不能改变父类原有功能
    - 接口隔离
        - 分离模块服务，降低具体类的耦合度
        - 提高类聚，减少对外交互
    - 开闭原则
        - 对扩展开放，对修改关闭
        - 用抽象构建框架，用实现扩展细节
    - 依赖倒置
        - 低层模块尽量都要有抽象类或接口
        - 变量的声明类型尽量是抽象类或接口
        - 使用继承时遵循里氏替换原则
